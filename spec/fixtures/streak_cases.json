{
  "description": "Test cases for streak trigger",
  "spec_section": "ยง2.2",
  "formula": "Count consecutive same-sign values, trigger if streak >= min_streak",
  "params": {"min_streak": 3},
  "cases": [
    {
      "name": "positive_streak_triggers",
      "input": {
        "values": [0.1, 0.2, 0.15, 0.3]
      },
      "expected": {
        "streak": 4,
        "triggered": true,
        "direction": 1
      },
      "note": "4 consecutive positive values"
    },
    {
      "name": "negative_streak_triggers",
      "input": {
        "values": [-0.1, -0.2, -0.15]
      },
      "expected": {
        "streak": 3,
        "triggered": true,
        "direction": -1
      },
      "note": "Exactly min_streak negative values"
    },
    {
      "name": "streak_too_short",
      "input": {
        "values": [0.1, 0.2]
      },
      "expected": {
        "streak": 2,
        "triggered": false,
        "direction": 0
      },
      "note": "2 < min_streak of 3"
    },
    {
      "name": "streak_broken_by_sign_change",
      "input": {
        "values": [0.1, 0.2, -0.1, 0.3, 0.4]
      },
      "expected": {
        "streak": 2,
        "triggered": false,
        "direction": 0
      },
      "note": "Current streak is 2 (last two positive)"
    },
    {
      "name": "zero_breaks_streak",
      "input": {
        "values": [0.1, 0.2, 0.0, 0.3]
      },
      "expected": {
        "streak": 1,
        "triggered": false,
        "direction": 0
      },
      "note": "Zero has no sign, breaks streak"
    },
    {
      "name": "alternating_signs",
      "input": {
        "values": [0.1, -0.1, 0.1, -0.1, 0.1]
      },
      "expected": {
        "streak": 1,
        "triggered": false,
        "direction": 0
      },
      "note": "Never builds streak > 1"
    },
    {
      "name": "empty_input",
      "input": {
        "values": []
      },
      "expected": {
        "streak": 0,
        "triggered": false,
        "direction": 0
      }
    },
    {
      "name": "single_value",
      "input": {
        "values": [0.5]
      },
      "expected": {
        "streak": 1,
        "triggered": false,
        "direction": 0
      }
    }
  ]
}
